<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Velha</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Press Start 2P', cursive;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: white;
        }

        @media screen and (max-width: 900px) {
            body {
                background-color: rgba(211, 29, 29, 0.781);
            }

            #title {
                color: aliceblue;
            }
        }

        nav {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            margin-bottom: 20px;
        }

        main {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: auto;
            width: 900px;
        }

        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            background-color: rgb(0, 0, 0);
            box-shadow: 1px 1px 2px 1px rgba(0, 0, 0, 0.5);
        }

        .sub_container {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgb(255, 255, 255);
            width: 150px;
            height: 150px;
        }

        .row:not(:last-child) {
            margin-bottom: 10px;
        }

        .sub_container:not(:last-child) {
            margin-right: 10px;
        }

        .row {
            display: flex;
            justify-content: center;
        }

        .marked {
            font-size: 4rem;
        }

        .placar {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 200px;
            width: 200px;
            box-shadow:
                    4.5px 5.2px 1.6px rgba(0, 0, 0, 0.483),
                    10.5px 12px 1.9px rgba(0, 0, 0, 0.569),
                    18.8px 21.6px 1.5px rgba(0, 0, 0, 0.604),
                    31.2px 35.8px 1.2px rgba(0, 0, 0, 0.617),
                    51.3px 59px 2.9px rgba(0, 0, 0, 0.619),
                    89.7px 103.1px 12.7px rgba(0, 0, 0, 0.616),
                    194px 223px 109px rgba(0, 0, 0, 0.61);
        }

        .placar_child {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            height: 150px;
            width: 150px;
        }

        .button {
            display: inline-block;
            padding: 5px 5px;
            margin: 2px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            background-color: #000000;
            color: #ffffff;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .button:hover {
            background-color: #000000cb;
        }

        .button:active {
            background-color: #000000;
            font-size: 16.2px;
        }
    </style>
</head>
<body>
<nav>
    <h1 id="title">JOGO DA VELHA</h1>
</nav>
<main>
    <section class="placar">
        <h1>Score</h1><br>
        <div class="placar_child">
            <h2 style="display: flex;">X: <p class="pointX">0</p></h2>
            <h2 style="display: flex;">O: <p class="pointO">0</p></h2>
        </div>
        <button class="button">Novo Jogo</button>
    </section>
    <section class="container">
        <div class="row">
            <section class="sub_container box1"><h1 class='marked'></h1></section>
            <section class="sub_container box2"><h1 class='marked'></h1></section>
            <section class="sub_container box3"><h1 class='marked'></h1></section>
        </div>
        <div class="row">
            <section class="sub_container box4"><h1 class='marked'></h1></section>
            <section class="sub_container box5"><h1 class='marked'></h1></section>
            <section class="sub_container box6"><h1 class='marked'></h1></section>
        </div>
        <div class="row">
            <section class="sub_container box7"><h1 class='marked'></h1></section>
            <section class="sub_container box8"><h1 class='marked'></h1></section>
            <section class="sub_container box9"><h1 class='marked'></h1></section>
        </div>
    </section>
</main>
<footer>

</footer>
</body>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        var meuH1 = document.getElementById('title');
        var larguraMaxima = 900;

        function verificarLargura() {
            if (window.innerWidth <= larguraMaxima) {
                meuH1.textContent = 'Largura muito curta';
            } else {
                meuH1.textContent = 'Jogo da Velha';
            }
        }

        verificarLargura();
        window.addEventListener('resize', verificarLargura);
    });

    let lista_teclas = document.querySelectorAll('.sub_container');
    let currentPlayer = 'X'; // Define o jogador atual como 'X'
    let primeiroJogador = 'X'; // Define o primeiro jogador como 'X'

    function marca(event) {
        var teclaClicada = event.target; // Obtém o elemento que foi clicado

        if (teclaClicada.textContent === '') {
            teclaClicada.innerHTML = `<h1 class='marked'>${currentPlayer}</h1>`;
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X'; // Alterna o jogador atual entre 'X' e 'O'
        } else {
            console.log('Nada acontece');
        }

        if (verificarVitoria()) {
            limparMarcas();
            primeiroJogador = currentPlayer === 'X' ? 'O' : 'X'; // Define o primeiro jogador como o próximo jogador (alternado)
            currentPlayer = primeiroJogador; // Define o jogador atual como o primeiro jogador
        }
    }

    function limparMarcas() {
        lista_teclas.forEach((tecla) => {
            tecla.innerHTML = ''; // Limpa o conteúdo de cada elemento da lista
        });
    }

    function verificarVitoria() {
        const combinacoesVitoria = [
            // Linhas
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            // Colunas
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            // Diagonais
            [0, 4, 8],
            [2, 4, 6]
        ];

        for (let combinacao of combinacoesVitoria) {
            const [a, b, c] = combinacao;
            const teclaA = lista_teclas[a];
            const teclaB = lista_teclas[b];
            const teclaC = lista_teclas[c];

            if (
                teclaA.textContent !== '' &&
                teclaA.textContent === teclaB.textContent &&
                teclaB.textContent === teclaC.textContent
            ) {
                // Vitória alcançada por teclaA.textContent (X ou O)
                console.log('Vitória do jogador: ' + teclaA.textContent);
                ponto = document.querySelector(`.point${teclaA.textContent}`);
                ponto.textContent = +ponto.textContent + 1;
                return true;
            }
        }

        return false;
    }

    for (contador = 0; contador < lista_teclas.length; contador++) {
        let tecla = lista_teclas[contador];
        tecla.addEventListener('click', marca);  // Adiciona um evento de clique em cada elemento da lista
    }

    let button = document.querySelector('.button');
    button.addEventListener('click', limparMarcas); // Adiciona um ouvinte de evento de clique ao botão, que chama a função limparMarcas()

</script>
</html>